<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Qu·∫£n L√Ω Kh√°ch H√†ng</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
</head>
<body>
  <!-- Menu -->
  <div class="ui inverted menu">
    <a class="item" href="index.html">Trang ch·ªß</a>
    <a class="item" href="nhapkho.html">Nh·∫≠p kho</a>
    <a class="item" href="xuatkho.html">Xu·∫•t kho</a>
    <a class="item" href="nhanvien.html">Nh√¢n vi√™n</a>
    <a class="item active" href="khachhang.html">Kh√°ch h√†ng</a>
    <a class="item" href="hoadon.html">H√≥a ƒë∆°n</a>
    <a class="item" href="baocao.html">B√°o c√°o</a>
  </div>

  <div class="ui container" style="margin-top: 20px;">
    <h2 class="ui header">üë• Qu·∫£n L√Ω Kh√°ch H√†ng</h2>

    <!-- Form kh√°ch h√†ng -->
    <form class="ui form" id="customerForm">
      <div class="fields">
        <div class="field">
          <label>M√£ KH</label>
          <input type="text" id="maKH" placeholder="KH001" required>
        </div>
        <div class="field">
          <label>H·ªç t√™n / C√¥ng ty</label>
          <input type="text" id="tenKH" placeholder="Nguy·ªÖn VƒÉn B / C√¥ng ty XYZ" required>
        </div>
        <div class="field">
          <label>Lo·∫°i KH</label>
          <select id="loaiKH" class="ui dropdown">
            <option value="C√° nh√¢n">C√° nh√¢n</option>
            <option value="Doanh nghi·ªáp">Doanh nghi·ªáp</option>
          </select>
        </div>
      </div>
      <div class="fields">
        <div class="field">
          <label>S·ªë ƒëi·ªán tho·∫°i</label>
          <input type="text" id="soDT" placeholder="0903123456">
        </div>
        <div class="field">
          <label>Email</label>
          <input type="email" id="email" placeholder="kh.b@domain.com">
        </div>
        <div class="field">
          <label>ƒê·ªãa ch·ªâ</label>
          <input type="text" id="diaChi" placeholder="TP.HCM">
        </div>
        <div class="field">
          <label>C√¥ng n·ª£</label>
          <input type="number" id="congNo" placeholder="0">
        </div>
      </div>
      <button class="ui primary button" type="submit">Th√™m / C·∫≠p nh·∫≠t</button>
      <button class="ui button" type="button" id="resetForm">Reset</button>
    </form>

    <!-- Danh s√°ch kh√°ch h√†ng -->
    <h3 class="ui dividing header" style="margin-top: 30px;">üìë Danh s√°ch kh√°ch h√†ng</h3>
    <table class="ui celled table" id="customerTable">
      <thead>
        <tr>
          <th>M√£ KH</th>
          <th>T√™n KH</th>
          <th>Lo·∫°i KH</th>
          <th>SƒêT</th>
          <th>Email</th>
          <th>ƒê·ªãa ch·ªâ</th>
          <th>C√¥ng n·ª£</th>
          <th>H√†nh ƒë·ªông</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <script>
    let editingRow = null;

    // Th√™m / C·∫≠p nh·∫≠t kh√°ch h√†ng
    $("#customerForm").on("submit", function(e) {
      e.preventDefault();

      const maKH = $("#maKH").val();
      const tenKH = $("#tenKH").val();
      const loaiKH = $("#loaiKH").val();
      const soDT = $("#soDT").val();
      const email = $("#email").val();
      const diaChi = $("#diaChi").val();
      const congNo = $("#congNo").val();

      if(editingRow) {
        // C·∫≠p nh·∫≠t
        $(editingRow).find("td:eq(0)").text(maKH);
        $(editingRow).find("td:eq(1)").text(tenKH);
        $(editingRow).find("td:eq(2)").text(loaiKH);
        $(editingRow).find("td:eq(3)").text(soDT);
        $(editingRow).find("td:eq(4)").text(email);
        $(editingRow).find("td:eq(5)").text(diaChi);
        $(editingRow).find("td:eq(6)").text(congNo);
        editingRow = null;
      } else {
        // Th√™m kh√°ch h√†ng
        $("#customerTable tbody").append(`
          <tr>
            <td>${maKH}</td>
            <td>${tenKH}</td>
            <td>${loaiKH}</td>
            <td>${soDT}</td>
            <td>${email}</td>
            <td>${diaChi}</td>
            <td>${congNo}</td>
            <td>
              <button class="ui blue button editBtn">S·ª≠a</button>
              <button class="ui red button deleteBtn">X√≥a</button>
            </td>
          </tr>
        `);
      }

      $("#customerForm")[0].reset();
    });

    // Reset form
    $("#resetForm").on("click", function() {
      $("#customerForm")[0].reset();
      editingRow = null;
    });

    // S·ª≠a kh√°ch h√†ng
    $(document).on("click", ".editBtn", function() {
      editingRow = $(this).closest("tr");
      $("#maKH").val($(editingRow).find("td:eq(0)").text());
      $("#tenKH").val($(editingRow).find("td:eq(1)").text());
      $("#loaiKH").val($(editingRow).find("td:eq(2)").text());
      $("#soDT").val($(editingRow).find("td:eq(3)").text());
      $("#email").val($(editingRow).find("td:eq(4)").text());
      $("#diaChi").val($(editingRow).find("td:eq(5)").text());
      $("#congNo").val($(editingRow).find("td:eq(6)").text());
    });

    // X√≥a kh√°ch h√†ng
    $(document).on("click", ".deleteBtn", function() {
      $(this).closest("tr").remove();
    });
  </script>
</body>
</html>
