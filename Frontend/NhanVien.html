<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Qu·∫£n L√Ω Nh√¢n Vi√™n</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
</head>
<body>
  <!-- Menu ch√≠nh -->
  <div class="ui inverted menu">
    <a class="item" href="TrangChu.html">Trang ch·ªß</a>
    <a class="item" href="Nhap.html">Nh·∫≠p kho</a>
    <a class="item" href="Xuat.html">Xu·∫•t kho</a>
    <a class="item" href="NhanVien.html">Nh√¢n vi√™n</a>
    <a class="item" href="KhachHang.html">Kh√°ch h√†ng</a>
    <a class="item" href="HoaDon.html">H√≥a ƒë∆°n</a>
    <a class="item" href="BaoCao.html">B√°o c√°o</a>
    <div class="right menu" id="authMenu"></div>
  </div>


  <div class="ui container" style="margin-top: 20px;">
    <h2 class="ui header">üë®‚Äçüíº Qu·∫£n L√Ω Nh√¢n Vi√™n</h2>

    <!-- Form Nh√¢n vi√™n -->
    <form class="ui form" id="employeeForm">
      <div class="fields">
        <div class="field">
          <label>M√£ NV</label>
          <input type="text" id="maNV" placeholder="NV001" required>
        </div>
        <div class="field">
          <label>H·ªç t√™n</label>
          <input type="text" id="hoTen" placeholder="Nguy·ªÖn VƒÉn A" required>
        </div>
        <div class="field">
          <label>Ch·ª©c v·ª•</label>
          <input type="text" id="chucVu" placeholder="Nh√¢n vi√™n kho">
        </div>
      </div>
      <div class="fields">
        <div class="field">
          <label>S·ªë ƒëi·ªán tho·∫°i</label>
          <input type="text" id="soDT" placeholder="0912345678">
        </div>
        <div class="field">
          <label>Email</label>
          <input type="email" id="email" placeholder="nv.a@company.com">
        </div>
        <div class="field">
          <label>ƒê·ªãa ch·ªâ</label>
          <input type="text" id="diaChi" placeholder="TP.HCM">
        </div>
      </div>
      <button class="ui primary button" type="submit">Th√™m / C·∫≠p nh·∫≠t</button>
      <button class="ui button" type="button" id="resetForm">Reset</button>
    </form>

    <!-- Danh s√°ch nh√¢n vi√™n -->
    <h3 class="ui dividing header" style="margin-top: 30px;">üìë Danh s√°ch nh√¢n vi√™n</h3>
    <table class="ui celled table" id="employeeTable">
      <thead>
        <tr>
          <th>M√£ NV</th>
          <th>H·ªç t√™n</th>
          <th>Ch·ª©c v·ª•</th>
          <th>SƒêT</th>
          <th>Email</th>
          <th>ƒê·ªãa ch·ªâ</th>
          <th>H√†nh ƒë·ªông</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

    <!-- ƒêƒÉng nh·∫≠p -->
  <script>
    const authMenu = document.getElementById("authMenu");

    // Ki·ªÉm tra tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
    function renderAuthMenu(){
      const isLoggedIn = localStorage.getItem("isLoggedIn");

      if(isLoggedIn === "true"){
        authMenu.innerHTML = '<a class="item" href="#" id="logoutBtn">ƒêƒÉng xu·∫•t</a>';
        document.getElementById("logoutBtn").addEventListener("click", function(){
          localStorage.removeItem("isLoggedIn");
          alert("B·∫°n ƒë√£ ƒëƒÉng xu·∫•t!");
          window.location.href = "DangNhap.html"; 
        });
      } else {
        authMenu.innerHTML = '<a class="item" href="DangNhap.html">ƒêƒÉng nh·∫≠p</a>';
      }
    }

    renderAuthMenu();
  </script>

  <script>
    let editingRow = null;

    // Th√™m / C·∫≠p nh·∫≠t nh√¢n vi√™n
    $("#employeeForm").on("submit", function(e) {
      e.preventDefault();

      const maNV = $("#maNV").val();
      const hoTen = $("#hoTen").val();
      const chucVu = $("#chucVu").val();
      const soDT = $("#soDT").val();
      const email = $("#email").val();
      const diaChi = $("#diaChi").val();

      if(editingRow) {
        // C·∫≠p nh·∫≠t nh√¢n vi√™n
        $(editingRow).find("td:eq(0)").text(maNV);
        $(editingRow).find("td:eq(1)").text(hoTen);
        $(editingRow).find("td:eq(2)").text(chucVu);
        $(editingRow).find("td:eq(3)").text(soDT);
        $(editingRow).find("td:eq(4)").text(email);
        $(editingRow).find("td:eq(5)").text(diaChi);
        editingRow = null;
      } else {
        // Th√™m nh√¢n vi√™n m·ªõi
        $("#employeeTable tbody").append(`
          <tr>
            <td>${maNV}</td>
            <td>${hoTen}</td>
            <td>${chucVu}</td>
            <td>${soDT}</td>
            <td>${email}</td>
            <td>${diaChi}</td>
            <td>
              <button class="ui blue button editBtn">S·ª≠a</button>
              <button class="ui red button deleteBtn">X√≥a</button>
            </td>
          </tr>
        `);
      }

      $("#employeeForm")[0].reset();
    });

    // N√∫t Reset form
    $("#resetForm").on("click", function() {
      $("#employeeForm")[0].reset();
      editingRow = null;
    });

    // Event S·ª≠a
    $(document).on("click", ".editBtn", function() {
      editingRow = $(this).closest("tr");
      $("#maNV").val($(editingRow).find("td:eq(0)").text());
      $("#hoTen").val($(editingRow).find("td:eq(1)").text());
      $("#chucVu").val($(editingRow).find("td:eq(2)").text());
      $("#soDT").val($(editingRow).find("td:eq(3)").text());
      $("#email").val($(editingRow).find("td:eq(4)").text());
      $("#diaChi").val($(editingRow).find("td:eq(5)").text());
    });

    // Event X√≥a
    $(document).on("click", ".deleteBtn", function() {
      $(this).closest("tr").remove();
    });
  </script>
</body>
</html>
